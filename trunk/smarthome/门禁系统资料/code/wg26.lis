                        .module wg26.c
                        .area text(rom, con, rel)
 0000                   .dbfile Z:\yang-home-shanghai\smarthome\门禁系统资料\code\wg26.c
 0000                   .dbfunc e init_interrupt _init_interrupt fV
                        .even
 0000           _init_interrupt::
 0000                   .dbline -1
 0000                   .dbline 11
 0000           ; #include <stdio.h>
 0000           ; #include <stdlib.h>
 0000           ; #include <string.h>
 0000           ; 
 0000           ; #include<iom16v.h>
 0000           ; #include <macros.h>
 0000           ; 
 0000           ; #include "uart.h"
 0000           ; 
 0000           ; void init_interrupt(void)
 0000           ; {
 0000                   .dbline 13
 0000           ;  //pd2,pd3 input mode.
 0000           ;  DDRD &= 0xf3;
 0000 81B3              in R24,0x11
 0002 837F              andi R24,243
 0004 81BB              out 0x11,R24
 0006                   .dbline 15
 0006           ;  //上拉。
 0006           ;  PORTD |= 0x0c;
 0006 82B3              in R24,0x12
 0008 8C60              ori R24,12
 000A 82BB              out 0x12,R24
 000C                   .dbline 17
 000C           ;  //enable interrupt.
 000C           ;  SREG |= 0x80;
 000C 7894              bset 7
 000E                   .dbline 19
 000E           ;  //int1 int0 enable.
 000E           ;  GICR |= 0xc0;
 000E 8BB7              in R24,0x3b
 0010 806C              ori R24,192
 0012 8BBF              out 0x3b,R24
 0014                   .dbline 21
 0014           ;   //int1 int0 fall edge.
 0014           ;  MCUCR |= 0x0a;
 0014 85B7              in R24,0x35
 0016 8A60              ori R24,10
 0018 85BF              out 0x35,R24
 001A                   .dbline 22
 001A           ;  return;
 001A                   .dbline -2
 001A           L1:
 001A                   .dbline 0 ; func end
 001A 0895              ret
 001C                   .dbend
                        .area data(ram, con, rel)
 0000                   .dbfile Z:\yang-home-shanghai\smarthome\门禁系统资料\code\wg26.c
 0000           _id_code::
 0000                   .blkb 4
                        .area idata
 0000 00000000          .word 0,0
                        .area data(ram, con, rel)
 0004                   .dbfile Z:\yang-home-shanghai\smarthome\门禁系统资料\code\wg26.c
 0004                   .dbsym e id_code _id_code l
                        .area vector(rom, abs)
                        .org 8
 0008 0C940E00          jmp _int1_isr
                        .area data(ram, con, rel)
 0004                   .dbfile Z:\yang-home-shanghai\smarthome\门禁系统资料\code\wg26.c
                        .area text(rom, con, rel)
 001C                   .dbfile Z:\yang-home-shanghai\smarthome\门禁系统资料\code\wg26.c
 001C                   .dbfunc e int1_isr _int1_isr fV
                        .even
 001C           _int1_isr::
 001C 2A92              st -y,R2
 001E 3A92              st -y,R3
 0020 4A92              st -y,R4
 0022 5A92              st -y,R5
 0024 8A92              st -y,R8
 0026 9A92              st -y,R9
 0028 EA93              st -y,R30
 002A 2FB6              in R2,0x3f
 002C 2A92              st -y,R2
 002E 0E940000          xcall push_gset2
 0032                   .dbline -1
 0032                   .dbline 29
 0032           ; }
 0032           ; 
 0032           ; unsigned long id_code = 0;
 0032           ; 
 0032           ; #pragma interrupt_handler int1_isr:3
 0032           ; void int1_isr(void)
 0032           ; {
 0032                   .dbline 30
 0032           ;  id_code <<= 1;
 0032 40900200          lds R4,_id_code+2
 0036 50900300          lds R5,_id_code+2+1
 003A 20900000          lds R2,_id_code
 003E 30900100          lds R3,_id_code+1
 0042 220C              lsl R2
 0044 331C              rol R3
 0046 441C              rol R4
 0048 551C              rol R5
 004A 30920100          sts _id_code+1,R3
 004E 20920000          sts _id_code,R2
 0052 50920300          sts _id_code+2+1,R5
 0056 40920200          sts _id_code+2,R4
 005A                   .dbline 31
 005A           ;  id_code |= 1;
 005A 41E0              ldi R20,1
 005C 50E0              ldi R21,0
 005E 60E0              ldi R22,0
 0060 70E0              ldi R23,0
 0062 242A              or R2,R20
 0064 352A              or R3,R21
 0066 462A              or R4,R22
 0068 572A              or R5,R23
 006A 30920100          sts _id_code+1,R3
 006E 20920000          sts _id_code,R2
 0072 50920300          sts _id_code+2+1,R5
 0076 40920200          sts _id_code+2,R4
 007A                   .dbline -2
 007A           L2:
 007A 0E940000          xcall pop_gset2
 007E 2990              ld R2,y+
 0080 2FBE              out 0x3f,R2
 0082 E991              ld R30,y+
 0084 9990              ld R9,y+
 0086 8990              ld R8,y+
 0088 5990              ld R5,y+
 008A 4990              ld R4,y+
 008C 3990              ld R3,y+
 008E 2990              ld R2,y+
 0090                   .dbline 0 ; func end
 0090 1895              reti
 0092                   .dbend
                        .area vector(rom, abs)
                        .org 4
 0004 0C944900          jmp _int0_isr
                        .area text(rom, con, rel)
 0092                   .dbfile Z:\yang-home-shanghai\smarthome\门禁系统资料\code\wg26.c
 0092                   .dbfunc e int0_isr _int0_isr fV
                        .even
 0092           _int0_isr::
 0092 0A92              st -y,R0
 0094 1A92              st -y,R1
 0096 2A92              st -y,R2
 0098 3A92              st -y,R3
 009A 4A92              st -y,R4
 009C 5A92              st -y,R5
 009E 0FB6              in R0,0x3f
 00A0 0A92              st -y,R0
 00A2                   .dbline -1
 00A2                   .dbline 36
 00A2           ; }
 00A2           ; 
 00A2           ; #pragma interrupt_handler int0_isr:2
 00A2           ; void int0_isr(void)
 00A2           ; {
 00A2                   .dbline 37
 00A2           ;  id_code <<= 1;
 00A2 40900200          lds R4,_id_code+2
 00A6 50900300          lds R5,_id_code+2+1
 00AA 20900000          lds R2,_id_code
 00AE 30900100          lds R3,_id_code+1
 00B2 220C              lsl R2
 00B4 331C              rol R3
 00B6 441C              rol R4
 00B8 551C              rol R5
 00BA 30920100          sts _id_code+1,R3
 00BE 20920000          sts _id_code,R2
 00C2 50920300          sts _id_code+2+1,R5
 00C6 40920200          sts _id_code+2,R4
 00CA                   .dbline -2
 00CA           L3:
 00CA 0990              ld R0,y+
 00CC 0FBE              out 0x3f,R0
 00CE 5990              ld R5,y+
 00D0 4990              ld R4,y+
 00D2 3990              ld R3,y+
 00D4 2990              ld R2,y+
 00D6 1990              ld R1,y+
 00D8 0990              ld R0,y+
 00DA                   .dbline 0 ; func end
 00DA 1895              reti
 00DC                   .dbend
